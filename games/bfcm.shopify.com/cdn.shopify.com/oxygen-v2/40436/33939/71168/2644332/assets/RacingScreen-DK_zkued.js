import{r as n,j as e}from"./components-BLYXEVDR.js";import{u as R,c as m}from"./index-DAMiY7pQ.js";import{d as b,e as p,a as v,f as E,G as w,g as L,B as x}from"./(_locale).editions.summer2025_.drive-Ds84qjLJ.js";import{d as N}from"./index-D17hYsCh.js";import{g,C as j,u as P}from"./CustomEase-BoqpfgTW.js";import{u as y,S as D,f as S,a as T,E as V}from"./SoundToggle-BdGWOSTp.js";import"./constants-B4WsaW4p.js";import"./ConsoleArt-CuYY2TOE.js";function M(){const t=n.useRef(null),r=n.useRef(null),{rive:s,RiveComponent:h}=N.useRive({src:"/cdn.shopify.com/s/files/1/0921/8919/6588/files/h_speedometer_v3_1_3.riv?v=1747319068",stateMachines:["State Machine 1"],autoBind:!0,autoplay:!0});return n.useEffect(()=>{var l,c;if(s){const f=()=>{s.resizeDrawingSurfaceToCanvas()};return f(),window.addEventListener("resize",f),t.current=((l=s.viewModelInstance)==null?void 0:l.number("MPH"))??null,r.current=((c=s.viewModelInstance)==null?void 0:c.number("Throttle"))??null,()=>{window.removeEventListener("resize",f)}}},[s]),n.useEffect(()=>{const l=b.subscribe(c=>c.speed,c=>{t.current&&(t.current.value=c/2.5)});return()=>{l()}},[]),n.useEffect(()=>{const l=p.subscribe(c=>c.triggers,c=>{r.current&&(r.current.value=c.right*100)});return()=>{l()}},[]),e.jsx("div",{className:"fixed drive-speedometer-font-for-responsive w-[17em] h-[8em] bottom-[0.3em] right-[1.5em]",children:e.jsx(h,{})})}function k(){const t=n.useRef(null);return n.useEffect(()=>{const r=b.subscribe(s=>s.speed,s=>{if(t.current){const h=Math.round(s)/250;t.current.style.transform=`scale(${h}, 2)`}});return()=>{r()}},[]),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"132",height:"16",viewBox:"0 0 132 16",fill:"none",children:[e.jsx("path",{d:"M129.538 0C130.898 0 132 1.1025 132 2.46191V13.5381C132 14.8975 130.898 16 129.538 16H2.46191C1.1025 16 0 14.8975 0 13.5381V2.46191C0 1.1025 1.1025 0 2.46191 0H129.538ZM3.5 2C2.67157 2 2 2.67157 2 3.5V12.5C2 13.3284 2.67157 14 3.5 14H24.5C25.3284 14 26 13.3284 26 12.5V3.5C26 2.67157 25.3284 2 24.5 2H3.5ZM29.5 2C28.6716 2 28 2.67157 28 3.5V12.5C28 13.3284 28.6716 14 29.5 14H50.5C51.3284 14 52 13.3284 52 12.5V3.5C52 2.67157 51.3284 2 50.5 2H29.5ZM55.5 2C54.6716 2 54 2.67157 54 3.5V12.5C54 13.3284 54.6716 14 55.5 14H76.5C77.3284 14 78 13.3284 78 12.5V3.5C78 2.67157 77.3284 2 76.5 2H55.5ZM81.5 2C80.6716 2 80 2.67157 80 3.5V12.5C80 13.3284 80.6716 14 81.5 14H102.5C103.328 14 104 13.3284 104 12.5V3.5C104 2.67157 103.328 2 102.5 2H81.5ZM107.5 2C106.672 2 106 2.67157 106 3.5V12.5C106 13.3284 106.672 14 107.5 14H128.5C129.328 14 130 13.3284 130 12.5V3.5C130 2.67157 129.328 2 128.5 2H107.5Z",fill:"black"}),e.jsx("path",{d:"M24.5004 2.00024C25.3287 2.00038 26.0004 2.6719 26.0004 3.50024V12.5002C26.0002 13.3285 25.3286 14.0001 24.5004 14.0002H3.50035C2.67201 14.0002 2.00048 13.3286 2.00035 12.5002V3.50024C2.00035 2.67182 2.67193 2.00024 3.50035 2.00024H24.5004ZM50.5004 2.00024C51.3287 2.00038 52.0004 2.6719 52.0004 3.50024V12.5002C52.0002 13.3285 51.3286 14.0001 50.5004 14.0002H29.5004C28.672 14.0002 28.0005 13.3286 28.0004 12.5002V3.50024C28.0004 2.67182 28.6719 2.00024 29.5004 2.00024H50.5004ZM76.5004 2.00024C77.3287 2.00038 78.0004 2.6719 78.0004 3.50024V12.5002C78.0002 13.3285 77.3286 14.0001 76.5004 14.0002H55.5004C54.672 14.0002 54.0005 13.3286 54.0004 12.5002V3.50024C54.0004 2.67182 54.6719 2.00024 55.5004 2.00024H76.5004ZM102.5 2.00024C103.329 2.00038 104 2.6719 104 3.50024V12.5002C104 13.3285 103.329 14.0001 102.5 14.0002H81.5004C80.672 14.0002 80.0005 13.3286 80.0004 12.5002V3.50024C80.0004 2.67182 80.6719 2.00024 81.5004 2.00024H102.5ZM128.5 2.00024C129.329 2.00038 130 2.6719 130 3.50024V12.5002C130 13.3285 129.329 14.0001 128.5 14.0002H107.5C106.672 14.0002 106 13.3286 106 12.5002V3.50024C106 2.67182 106.672 2.00024 107.5 2.00024H128.5Z",fill:"#170C2B",fillOpacity:"0.7"}),e.jsx("mask",{id:"mask0_634_11569",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"2",y:"2",width:"129",height:"13",children:e.jsx("path",{d:"M24.5004 2.00024C25.3287 2.00038 26.0004 2.6719 26.0004 3.50024V12.5002C26.0002 13.3285 25.3286 14.0001 24.5004 14.0002H3.50035C2.67201 14.0002 2.00048 13.3286 2.00035 12.5002V3.50024C2.00035 2.67182 2.67193 2.00024 3.50035 2.00024H24.5004ZM50.5004 2.00024C51.3287 2.00038 52.0004 2.6719 52.0004 3.50024V12.5002C52.0002 13.3285 51.3286 14.0001 50.5004 14.0002H29.5004C28.672 14.0002 28.0005 13.3286 28.0004 12.5002V3.50024C28.0004 2.67182 28.6719 2.00024 29.5004 2.00024H50.5004ZM76.5004 2.00024C77.3287 2.00038 78.0004 2.6719 78.0004 3.50024V12.5002C78.0002 13.3285 77.3286 14.0001 76.5004 14.0002H55.5004C54.672 14.0002 54.0005 13.3286 54.0004 12.5002V3.50024C54.0004 2.67182 54.6719 2.00024 55.5004 2.00024H76.5004ZM102.5 2.00024C103.329 2.00038 104 2.6719 104 3.50024V12.5002C104 13.3285 103.329 14.0001 102.5 14.0002H81.5004C80.672 14.0002 80.0005 13.3286 80.0004 12.5002V3.50024C80.0004 2.67182 80.6719 2.00024 81.5004 2.00024H102.5ZM128.5 2.00024C129.329 2.00038 130 2.6719 130 3.50024V12.5002C130 13.3285 129.329 14.0001 128.5 14.0002H107.5C106.672 14.0002 106 13.3286 106 12.5002V3.50024C106 2.67182 106.672 2.00024 107.5 2.00024H128.5Z",fill:"#170C2B"})}),e.jsx("g",{mask:"url(#mask0_634_11569)",children:e.jsx("g",{clipPath:"url(#clip0_634_11569)",children:e.jsx("rect",{x:"2.00019",y:"2",width:"128",height:"12",rx:"1.5",fill:"url(#paint0_linear_634_11569)"})})}),e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"paint0_linear_634_11569",x1:"176.72",y1:"7.99972",x2:"2.00019",y2:"7.99972",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#5500FF"}),e.jsx("stop",{offset:"0.26875",stopColor:"#FF4000"}),e.jsx("stop",{offset:"0.5375",stopColor:"#9C00FF"}),e.jsx("stop",{offset:"0.73125",stopColor:"#4E00FF"}),e.jsx("stop",{offset:"1",stopColor:"#5500FF"})]}),e.jsx("clipPath",{id:"clip0_634_11569",children:e.jsx("rect",{ref:t,width:"130",height:"12",fill:"white",transform:"scale(0, 2)",style:{transformOrigin:"left"}})})]})]})}function B(){const t=n.useRef(null);return n.useEffect(()=>{const r=b.subscribe(s=>s.speed,s=>{t.current&&(t.current.textContent=s.toFixed(0))});return()=>{r()}},[]),e.jsxs("div",{className:"absolute drive-speedometer-font-for-responsive top-[1.35em] left-[1.5em]",children:[e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx("div",{ref:t,className:"drive-headline3-mono-touch-device min-w-[3ch] text-right",children:"0"}),e.jsx("div",{className:"drive-headline3 relative text-8 top-[0.2rem]",children:"MPH"})]}),e.jsx(k,{})]})}function F(){const t=R(r=>r.isTouchDevice);return t===null?null:t?e.jsx(B,{}):e.jsx(M,{})}function _(){const t=v(u=>u.countdownNumber),r=v(u=>u.setCountdownNumber),[s,h]=n.useState(!1),[l,c]=n.useState(!1),[f,d]=n.useState(!1),a=v(u=>u.startRace),o=E(w.RacingScreen),i=L();return n.useEffect(()=>{h(o),o&&!f&&r(3)},[o,i,r,f]),n.useEffect(()=>{if(!s||f)return;if(t===0){a(),c(!0);return}const u=setTimeout(()=>{r(t-1)},1e3);return()=>clearTimeout(u)},[t,a,s,f,r]),n.useEffect(()=>{window.location.search.includes("skipcountdown=true")&&(d(!0),a(),c(!0),r(-1))},[d,a,c,r]),!s||f?null:e.jsx("div",{className:m("fixed inset-0 flex items-center justify-center z-10 pointer-events-none touch-none"),children:e.jsx("div",{className:"relative z-10 flex flex-col items-center",children:t===0?e.jsx("div",{className:"drive-headline0 animate-game-countdown-go",children:"GO!"}):e.jsx("div",{className:"drive-headline0 animate-game-countdown-bounce",children:t})})})}function U(){const t=v(i=>i.raceEndTime),r=v(i=>i.raceCount),s=t!==null,[h,l]=n.useState(!1),c=n.useRef(null),f=n.useRef(null),d=y(i=>i.hasTrophyRendered),a=n.useRef(null),o=n.useRef(null);return n.useEffect(()=>{s&&v.getState().setGameScreen(w.ResultsScreen)},[s]),n.useEffect(()=>(g.registerPlugin(D),g.registerPlugin(j),j.create("finishLineEase","0.25, 1, 0.5, 1"),j.create("finishLineExitEase","0.76, 0.00, 0.24, 1.00"),j.create("finishLineStagger","0.26, 1.00, 0.48, 1.00"),()=>{o.current&&o.current.revert()}),[]),P(()=>{if(!a.current)return;o.current=new D(a.current,{type:"chars",charsClass:"finish-line-char"});const i=g.timeline({paused:!0,id:"finish-line-entrance"});i.set(a.current,{opacity:0,y:0,scale:.6}).set(".finish-line-char",{opacity:0,scale:.9,y:50}),i.to(a.current,{opacity:1,duration:.3},"entrance").to(a.current,{scale:1,duration:2,ease:"finishLineEase"},"entrance").to(".finish-line-char",{opacity:1,y:0,duration:.4,stagger:.16,ease:"finishLineStagger"},"entrance"),c.current=i},{scope:a}),n.useEffect(()=>{if(!s||!c.current)return;c.current.play(0);const i=document.querySelectorAll(".finish-line-char");setTimeout(()=>{l(!0),y.getState().setHasFinishEntranceCompleted(!0)},1e3+160*i.length)},[s]),P(()=>{if(!a.current)return;const i=g.timeline({paused:!0,id:"finish-line-exit"});i.to(a.current,{y:-1*window.innerHeight,duration:1,ease:"finishLineExitEase"}),f.current=i},{scope:a}),n.useEffect(()=>{l(!1),y.getState().setHasFinishEntranceCompleted(!1)},[r]),n.useEffect(()=>{!h||!d||!f.current||f.current.play(0)},[d,h]),e.jsx(e.Fragment,{children:e.jsx("div",{className:m("fixed top-0 left-0 w-screen h-screen flex items-center justify-center pointer-events-none"),children:e.jsx("h2",{ref:a,className:"drive-headline0 opacity-0 [&>.finish-line-char]:opacity-0",children:"FINISH!"})})})}function Z(){const[t,r]=n.useState(!1),s=n.useRef(!1),h=n.useRef(null),l=o=>{o.preventDefault(),r(!0),s.current=!0,p.getState().setButtonDown(x.Up)},c=o=>{o.preventDefault(),r(!1),p.getState().setButtonUp(x.Up)},f=c,d=c,a=o=>o.preventDefault();return n.useEffect(()=>{const o=h.current;if(o)return o.addEventListener("touchstart",a),o.addEventListener("touchmove",a),()=>{o.removeEventListener("touchstart",a),o.removeEventListener("touchmove",a)}},[]),e.jsxs("button",{ref:h,onPointerDown:l,onPointerUp:c,onPointerCancel:f,onPointerLeave:d,"aria-label":"Accelerator","aria-pressed":t,className:"relative touch-manipulation select-none py-26 pr-22 pl-11 grid items-center",style:{touchAction:"none"},onContextMenu:o=>o.preventDefault(),children:[e.jsx("img",{src:"/cdn.shopify.com/s/files/1/0921/8919/6588/files/accelerator-pressed.png?v=1746716254",alt:"",className:m("relative w-40 pointer-events-none select-none",t?"opacity-100":"opacity-0")}),e.jsx("img",{src:"/cdn.shopify.com/s/files/1/0921/8919/6588/files/accelerator.png?v=1746716254",alt:"",className:m("left-11 absolute w-40 pointer-events-none select-none",t?"opacity-0":"opacity-100")})]})}function A({className:t}){const[r,s]=n.useState(!1),h=n.useRef(!1),l=n.useRef(null),c=i=>{i.preventDefault(),s(!0),h.current=!0,p.getState().setButtonDown(x.Down)},f=i=>{i.preventDefault(),s(!1),h.current=!1,p.getState().setButtonUp(x.Down)},d=f,a=f,o=i=>i.preventDefault();return n.useEffect(()=>{const i=l.current;if(i)return i.addEventListener("touchstart",o),i.addEventListener("touchmove",o),()=>{i.removeEventListener("touchstart",o),i.removeEventListener("touchmove",o)}},[]),e.jsx("button",{ref:l,onPointerDown:c,onPointerUp:f,onPointerCancel:d,onPointerLeave:a,"aria-label":"Brake","aria-pressed":r,className:m("touch-manipulation select-none ",t),style:{touchAction:"none"},onContextMenu:i=>i.preventDefault(),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:"44",viewBox:"0 0 78 44",width:"78",className:"pointer-events-none select-none",children:[e.jsx("path",{d:"m2 5c0-1.65685 1.34315-3 3-3h68c1.6569 0 3 1.34315 3 3v34c0 1.6569-1.3431 3-3 3h-68c-1.65686 0-3-1.3431-3-3z",fill:"#fff",fillOpacity:r?.4:.2}),e.jsx("path",{d:"m73 1c2.2091 0 4 1.79086 4 4v34c0 2.2091-1.7909 4-4 4h-68c-2.20914 0-4-1.7909-4-4v-34c0-2.20914 1.79086-4 4-4z",stroke:"#fff",strokeLinejoin:"round",strokeOpacity:r?1:.3,strokeWidth:"2"}),e.jsxs("g",{fill:"#fff",children:[e.jsx("rect",{height:"6",rx:"3",width:"6",x:"54",y:"9"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"36",y:"9"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"18",y:"9"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"54",y:"19"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"36",y:"19"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"18",y:"19"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"54",y:"29"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"36",y:"29"}),e.jsx("rect",{height:"6",rx:"3",width:"6",x:"18",y:"29"})]})]})})}const H=({isPressed:t,className:r})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:"64",viewBox:"0 0 48 64",width:"48",className:m("select-none",r),children:[e.jsx("path",{d:"m2 26c0-13.2548 10.7452-24 24-24h18c1.1046 0 2 .89543 2 2v56c0 1.1046-.8954 2-2 2h-18c-13.2548 0-24-10.7452-24-24z",fill:"#fff",fillOpacity:t?.4:.2}),e.jsx("path",{d:"m44 1c1.6569 0 3 1.34315 3 3v56c0 1.6569-1.3431 3-3 3h-18c-13.8071 0-25-11.1929-25-25v-12c0-13.8071 11.1929-25 25-25z",stroke:"#fff",strokeLinejoin:"round",strokeOpacity:t?1:.3,strokeWidth:"2"}),e.jsx("path",{d:"m28.6336 38.0344-7.5108-5.0345c-.7193-.4821-.7193-1.5177 0-1.9998l7.5108-5.0345c.8258-.5535 1.9497.0229 1.9497.9999v10.069c0 .977-1.1239 1.5534-1.9497.9999z",fill:"#fff"})]});function I(){const[t,r]=n.useState(!1),[s,h]=n.useState(!1),l=n.useRef(null),c=n.useRef(null),f=u=>{u.preventDefault(),r(!0),p.getState().setButtonDown(x.Left)},d=u=>{u.preventDefault(),h(!0),p.getState().setButtonDown(x.Right)},a=u=>{u.preventDefault(),r(!1),p.getState().setButtonUp(x.Left)},o=u=>{u.preventDefault(),h(!1),p.getState().setButtonUp(x.Right)},i=u=>u.preventDefault();return n.useEffect(()=>{const u=l.current,C=c.current;if(!(!u||!C))return u.addEventListener("touchstart",i),u.addEventListener("touchmove",i),C.addEventListener("touchstart",i),C.addEventListener("touchmove",i),()=>{u.removeEventListener("touchstart",i),u.removeEventListener("touchmove",i),C.removeEventListener("touchstart",i),C.removeEventListener("touchmove",i)}},[]),e.jsxs("div",{className:"relative flex gap-15",children:[e.jsx("button",{ref:l,className:"select-none touch-manipulation py-26 pl-22 pr-11","aria-label":"left","aria-pressed":t,onPointerDown:f,onPointerUp:a,onPointerCancel:a,onPointerLeave:a,style:{touchAction:"none"},onContextMenu:u=>u.preventDefault(),children:e.jsx(H,{isPressed:t})}),e.jsx("button",{ref:c,className:"select-none touch-manipulation py-26 pl-11 pr-22","aria-label":"right","aria-pressed":s,onPointerDown:d,onPointerUp:o,onPointerCancel:o,onPointerLeave:o,style:{touchAction:"none"},onContextMenu:u=>u.preventDefault(),children:e.jsx(H,{className:"-scale-100",isPressed:s})})]})}function z(){const t=R(s=>s.isMobile),r=R(s=>s.isTouchDevice);return!t&&!r?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute bottom-0 right-0 flex items-center justify-center gap-12",children:[e.jsx(A,{className:"relative top-4 py-26 pl-22 pr-11"}),e.jsx(Z,{})]}),e.jsx("div",{className:"absolute left-0 bottom-0",children:e.jsx(I,{})})]})}function G(){const t=n.useRef(null),r=n.useRef(null),s=n.useRef(null),h=n.useRef(0),l=v(d=>d.raceStartTime),c=v(d=>d.raceEndTime),f=L();return n.useEffect(()=>{if(!(!t.current||!r.current||!s.current)&&f>0){const d=S(0);t.current.textContent=d.minutes,r.current.textContent=d.seconds,s.current.textContent=d.ms}},[f]),n.useEffect(()=>{let d=null;const a=()=>{if(!(!t.current||!r.current||!s.current||!l)){if(c){const o=S(c-l);t.current.textContent=o.minutes,r.current.textContent=o.seconds,s.current.textContent=o.ms;return}if(h.current=performance.now(),l&&h.current){const o=S(h.current-l);t.current.textContent=o.minutes,r.current.textContent=o.seconds,s.current.textContent=o.ms}d=requestAnimationFrame(a)}};return d=requestAnimationFrame(a),()=>{d&&cancelAnimationFrame(d)}},[l,c]),e.jsxs("div",{className:m("drive-headline3 fixed pointer-events-none flex items-center gap-[0.5em]","justify-center not-touch-device:justify-start","top-10 left-0 right-0 mx-auto","md:top-[1em] md:left-[1em]"),children:[e.jsx("img",{src:"/cdn.shopify.com/s/files/1/0921/8919/6588/files/Vector_9b985519-afc0-461e-80c8-d8bca7ebe056.svg?v=1746466699",alt:"",className:m("hidden not-touch-device:block","relative w-[1.54em] top-[0.05em]")}),e.jsx("div",{className:m("hidden not-touch-device:block","mr-[0.1em]"),children:"Time"}),e.jsxs("div",{className:"drive-headline3-mono drive-headline3-mono-align-top flex items-center gap-[0.1em]",children:[e.jsx("span",{ref:t,children:"00"}),e.jsx("span",{children:":"}),e.jsx("span",{ref:r,children:"00"}),e.jsx("span",{children:":"}),e.jsx("span",{ref:s,children:"000"})]})]})}function Y(){const t=E(w.RacingScreen),r=E(w.ResultsScreen),s=t||r;return e.jsxs("div",{"data-racing-screen":!0,className:m("fixed top-0 left-0 inset-0 z-10","transition-opacity duration-300",s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[e.jsx(_,{}),e.jsx(F,{}),e.jsx(G,{}),e.jsx(T,{}),e.jsx(V,{}),e.jsx(z,{}),e.jsx(U,{})]})}export{Y as default};
//# sourceMappingURL=RacingScreen-DK_zkued.js.map
